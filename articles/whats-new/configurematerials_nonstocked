---
title: Enable non-stocked materials and pending vendor invoices in Project Operations for resource/ non-stocked based scenarios
description: This topic provides information about how to enable non-stocked materials and pending vendor invoices in Project operations for resource/ non-stocked based scenarios
author: sigitac
manager: tfehr
ms.date: 04/01/2021
ms.topic: article
ms.prod:
ms.service: project-operations
ms.reviewer: kfend 
ms.author: sigitac
---

#Update Project Operations for resource/ non-stocked based scenarios to April 2021 release

_**Applies To:** Project Operations for resource/non-stocked based scenarios_

## Minimum version requirement

Using non-stocked materials and pending vendor invoices for Project Operations non-stocked/ resource based scenarios requires the following versions:

Dataverse solutions:

- Microsoft Dynamics 365 Project Operations – 4.9XXX or higher
- Dual-write application orchestration solution - 2.2.2.23 or higher

Finance and Operations apps:
- 10.0.18 (10.0.793.XX) or higher. Please make sure Finance and Operations environment is up- to date and all quality updates are applied to meet minimum version requirements.

## Run Dual Write maps for non-stocked materials and vendor invoice integration

This section highlights the maps required specifically for non-stocked materials and vendor invoice, however make sure that prerequisite maps listed in [Provision a new environment | Microsoft Docs](https://docs.microsoft.com/en-us/dynamics365/project-operations/environment/resource-provision-new-environment#run-project-operations-dual-write-maps) are running on your environment.

1. In your LCS project, go to the Environment details page.
2. Under Common Data Service Environment Information, select Link to CDS for Apps. After you select the link, you will be redirected to the list of entities in the mappings.
3. Make sure the following maps are running, if they are not running, please start them, including all related table maps.

    1. CDS released distinct products (products)
    2. Vendors v2 (msdyn_vendors)
    3. Project Operations table for material estimates (msdyn_estimatelines)
    4. Project Operations integration project vendor invoice export entity (msdyn_projectvendorinvoices)
    5. Project Operations integration project vendor invoice line export entity (msdyn_projectvendorinvoicelines)
    6. Project Operations integration actuals (msdyn_actuals) – make sure you are running map version 1.0.0.14 or higher. You can see active version of the map in Version column in Dual Write page. You can activate new version of the map by using Table map version button and saving selected version.

If you are using standard demo data, you might also need to perform the following:

1. Stop and restart with initial sync the following entity maps:
  1. Payment days CDS V2 (msdyn_paymentdays)
  2. Payment schedule (msdyn_paymentschedules)
  3. Terms of payment (msdyn_paymentterms)
  4. Vendor groups (msdyn_vendorgroups)
  5. Units (uom)
2. Note that initial sync for Vendor groups and units might fail for a few records in existing demo data set. These failures can be ignored and will not prevent using demo data with Project Operations.

## Configure prerequisites in Dataverse

#### Activate workflow to create accounts based on vendor entity

Dual Write Orchestration solution provides [Vendors master integration](https://docs.microsoft.com/en-us/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/vendor-mapping). As a prerequisite for this feature, Vendor data must be created in Accounts entity. Activate a template workflow process to Create Vendors in Accounts Table as described in [Switch between vendor designs - Finance &amp; Operations | Dynamics 365 | Microsoft Docs](https://docs.microsoft.com/en-us/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/vendor-switch#use-the-extended-vendor-design-for-vendors-of-the-organization-type).

####

#### Set products to be created in active state

Non-stocked materials used in this feature must be configured as Released products in Finance and Operations apps. Dual Write Orchestration solution provides out-of-the-box [Released products integration to Dataverse Product catalog](https://docs.microsoft.com/en-us/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/product-mapping). By default products from Finance and Operations apps are synchronized to Dataverse in Draft state. To synchronize the product with Active state so that you can directly use it in material usage documents or pending vendor invoices, the following setting needs to be chosen: System\&gt; Administration \&gt; System administration \&gt; System settings \&gt; Sales tab and select Create products in active state = yes.

## Configure prerequisites in Finance and Operations apps

#### Enable feature key for Pending vendor invoices

Adding project details on Pending vendor invoice lines, requires the following feature to be enabled:

1. In Finance and Operations apps, go to the **Feature Management** workspace.

1. In Feature list, find **Enable pending vendor invoices on Project Operations for resource based/non-stocked scenarios** feature and enable it.

####

#### Define category groups and project categories for items

Configure at least one Category group for Transaction type Item and at least one Project category using this group as described in [Configure project categories | Microsoft Docs](https://docs.microsoft.com/en-us/dynamics365/project-operations/project-accounting/configure-project-categories#category-groups)

Review Project cost and revenue profiles and configure ledger posting setup for Item transactions as described in [Configure accounting for billable projects | Microsoft Docs](https://docs.microsoft.com/en-us/dynamics365/project-operations/project-accounting/configure-accounting-billable-projects)

#### Set up write-in product

Project Operations allow recording material estimates and usage for both catalog products, configured in Released product catalog and write-in products. Using write-in products require a single released product configured in Finance and Operations apps for this purpose. Follow these steps to configure write-in product. These steps need to be repeated in each Legal entity using Project Operations for resource/ non-stocked scenarios.

1. In Finance and Operations apps:
  1. Navigate to Product Information Management \&gt; Products \&gt; Released products and select New.
  2. Set Product type to Item and Product subtype to Product
  3. Enter Product number (i.e. WRITEIN)
  4. Enter Product name (i.e. Write-in Product)
  5. Select Item model group. **Make sure Item model group selected has Inventory policy Stocked product set to False.**
  6. Set Item group, Storage dimension group and Tracking dimension group. We recommend using Storage dimension for Site only and setting no tracking dimensions to be used.
  7. Set Inventory unit, Purchase unit and Sales Unit (i.e. Each)
  8. Save the record
  9. In Plan tab select Default order settings. In Inventory tab, set Default site and if required Default warehouse.
  10. Save the record.
  11. Navigate to Project management and accounting \&gt; Setup \&gt; Project management and accounting parameters and open Project Operations on Dynamics 365 Customer Engagement. In Materials tab set Write-in product value to the release product set up in the previous steps
2. In Dataverse environment:
  1. In the site map open Products entity and find the Write-in product record. Open record details and set product state to Retired. This will prevent accidently using this record directly in material estimates and usage documents.

#### Set up Procurement integration account

Procurement integration account is used as a clearing account when posting pending vendor invoice with lines attributed to a project:

1. When system posts pending vendor invoice this account is used for project cost amount.
2. System processes vendor invoice details in Dataverse, creates corresponding Project Actuals and brings this information to Project Operations Integration journal. Posting integration journal will clear amount from Procurement integration account and will record it to the project cost.

To set up Procurement integration account navigate to Project management and accounting \&gt; Setup \&gt; Project management and accounting parameters and open Project Operations on Dynamics 365 Customer Engagement. In Materials tab set the value in Procurement integration account.

#### Set up Project Category defaults for Item

Navigate to Project management and accounting \&gt; Setup \&gt; Project management and accounting parameters and open Project Operations on Dynamics 365 Customer Engagement. In Project category defaults tab set the value in **Item** field. This project category will be used for material transactions, where project category was not set on Project actuals record.
